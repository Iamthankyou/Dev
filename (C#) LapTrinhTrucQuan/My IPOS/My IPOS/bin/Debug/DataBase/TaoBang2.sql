CREATE TABLE TraSua
(
  ID_TraSua NVARCHAR(10) NOT NULL,
  TenTraSua NVARCHAR(50) NOT NULL,
  DonGiaTraSua INT NOT NULL,
  PRIMARY KEY (ID_TraSua)
);

CREATE TABLE KhachHang
(
  ID_KhachHang NVARCHAR(10) NOT NULL,
  GioiTinh BIT NOT NULL,
  NgaySinh DATETIME NOT NULL,
  TenKhachHang NVARCHAR(50) NOT NULL,
  LienHe NVARCHAR(50),
  PRIMARY KEY (ID_KhachHang)
);

CREATE TABLE Topping
(
  ID_Topping NVARCHAR(10) NOT NULL,
  TenTopping NVARCHAR(50) NOT NULL,
  DonGiaTopping INT NOT NULL,
  PRIMARY KEY (ID_Topping)
);

CREATE TABLE Voucher
(
  ID_Voucher NVARCHAR(10) NOT NULL,
  MaGiamGia NVARCHAR(16) NOT NULL,
  TenVoucher NVARCHAR(50) NOT NULL,
  PhanTram INT NOT NULL,
  SoLuong INT,
  PRIMARY KEY (ID_Voucher)
);

CREATE TABLE ThemTopping
(
  ID_TraSua NVARCHAR(10) NOT NULL,
  ID_Topping NVARCHAR(10) NOT NULL,
  FOREIGN KEY (ID_TraSua) REFERENCES TraSua(ID_TraSua),
  FOREIGN KEY (ID_Topping) REFERENCES Topping(ID_Topping)
);

CREATE TABLE HoaDon
(
  ID_HoaDon NVARCHAR(10) NOT NULL,
  TongTien INT NOT NULL,
  ID_KhachHang NVARCHAR(10) NOT NULL,
  ID_Voucher NVARCHAR(10) NOT NULL,
  PRIMARY KEY (ID_HoaDon),
  FOREIGN KEY (ID_KhachHang) REFERENCES KhachHang(ID_KhachHang),
  FOREIGN KEY (ID_Voucher) REFERENCES Voucher(ID_Voucher)
);

CREATE TABLE ChiTietHoaDon
(
  GiamGia INT,
  SoLuong INT NOT NULL,
  ID_HoaDon NVARCHAR(10) NOT NULL,
  ID_TraSua NVARCHAR(10) NOT NULL,
  PRIMARY KEY (ID_HoaDon, ID_TraSua),
  FOREIGN KEY (ID_HoaDon) REFERENCES HoaDon(ID_HoaDon),
  FOREIGN KEY (ID_TraSua) REFERENCES TraSua(ID_TraSua)
);